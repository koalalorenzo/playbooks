all:
  vars:
    ssl_domains:
      - nomad.setale.me
      - consul.setale.me
    extra_ssl_domains: []

    ansible_user: koalalorenzo
    system_users:
      - username: jakub
        pubkeys_urls: []
        email: ""

    gpg_key_fingerprints:
      - 73880ECAF69EC2ED44CE5889502BFB12D0B5295F
      - 55065306FCC6617D4D928B70020F4A4E40F95228
      - 13C6836A224BB603724399C671C9E6BA29324FEE

    tailscale_accept_dns: "true"
    custom_domains:
      minio-api.setale.me: compute1.setale.me
      minio.setale.me: compute1.setale.me
      archive.setale.me: compute1.setale.me
      media.setale.me: compute1.setale.me
      consul.setale.me: compute1.setale.me
      nomad.setale.me: compute1.setale.me
  hosts:
    storage0.local:
      extra_ssl_domains:
        - storage0.home.setale.me
    compute0.local:
      extra_ssl_domains:
        - compute0.home.setale.me
    compute1.local:
      extra_ssl_domains:
        - compute1.home.setale.me

  children:
    nomadServers:
      hosts:
        storage0.local:
        compute1.local:
      vars:

    nomadClients:
      hosts:
        storage0.local:
          node_class: "storage"
          host_volumes:
            - name: "minio"
              path: "/main/minio"
            - name: "multimedia"
              path: "/main/multimedia"
            - name: "downloads"
              path: "/main/downloads"
        compute1.local:

    # Deploys Consul on every Nomad Servers
    consul:
      children:
        nomadServers:

    nomad:
      children:
        nomadServers:
        nomadClients:

    # Machines that provide storage layer (OpenZFS)
    storage:
      hosts:
        storage0.local:
